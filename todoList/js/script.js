let addInput=document.querySelector(".controll__addInput"),addBtn=document.querySelector(".controll__addBtn"),checkAll=document.querySelector(".checkAll"),importantAll=document.querySelector(".importantAll"),deleteAll=document.querySelector(".deleteAll"),deleteChecked=document.querySelector(".deleteChecked"),list=document.querySelector(".todoList"),todoList=[];function checkList(){localStorage.getItem("todo")&&(todoList=JSON.parse(localStorage.getItem("todo")),displayList()),checkDoneMsg(),checkImpMsg(),checkEmptyList(),listenersOnListItem()}function checkDoneMsg(e){todoList.forEach((e,t)=>{e.checked?(list.children[t].classList.add("doneMsg"),list.children[t].children[0].setAttribute("checked","")):e.checked||(list.children[t].classList.remove("doneMsg"),list.children[t].children[0].removeAttribute("checked"))})}function checkImpMsg(e){todoList.forEach((e,t)=>{e.important&&list.children[t].classList.add("importantMsg")})}function checkEmptyList(){0==todoList.length&&(list.innerHTML='<p class="empty">Sorry, it`s empty here! \n    Please, add some tasks that You want to do.</p>')}function listenersOnListItem(){list.addEventListener("change",makeDoneMsg);let e=document.querySelectorAll(".todoList__item"),t=document.querySelectorAll(".todoList__btn_important"),l=document.querySelectorAll(".todoList__btn_delete");for(let o=0;o<e.length;o++)t[o].addEventListener("click",makeImportantMsg),l[o].addEventListener("click",deleteMsg)}window.addEventListener("load",checkList);let bg=document.querySelector(".bg"),alertBx=document.querySelector(".alert"),alertText=document.querySelector(".alert__text");function alertFn(e){alertText.innerHTML=e,alertBx.classList.add("alert_active"),addInput.setAttribute("disabled",""),setTimeout(hideAlert,3e3)}function hideAlert(){alertBx.classList.remove("alert_active"),addInput.removeAttribute("disabled","")}function addToList(e){if(e.preventDefault(),""==addInput.value||!addInput.value.trim())return void alertFn("Write some text to add");for(let e=0;e<todoList.length;e++)if(todoList[e].todo=todoList[e].todo.trim(),addInput.value=addInput.value.replace(/\s+/g," ").trim(),todoList[e].todo===addInput.value)return alertFn("This task is already exist"),void(addInput.value="");let t={todo:addInput.value,checked:!1,important:!1};todoList.push(t),displayList(),checkDoneMsg(),checkImpMsg(),checkEmptyList(),checkDarkMode(),listenersOnListItem(),addInput.value="",localStorage.setItem("todo",JSON.stringify(todoList))}function displayList(){let e="";todoList.forEach((t,l)=>{e+=`\n    <li id="todoList_listItem_${l}" class="todoList__item">\n      <input type="checkbox" id="todoList_item_${l}" class="todoList__checkbox" >\n      <label for="todoList_item_${l}" class="todoList__customCheckbox"></label>\n      <label for="todoList_item_${l}" class="todoList__label">${t.todo}</label>\n      <i id="todoList_importantBtn_${l}"  class="fas fa-exclamation todoList__btn todoList__btn_important"></i>\n      <i id="todoList_deleteBtn_${l}" class="fas fa-trash todoList__btn todoList__btn_delete"></i>\n    </li>\n    `,list.innerHTML=e})}function makeDoneMsg(e){let t=e.target.getAttribute("id"),l=list.querySelector(".todoList__label[for="+t+"]").innerHTML;e.target.parentNode.classList.toggle("doneMsg"),todoList.forEach(e=>{e.todo===l&&(e.checked=!e.checked),localStorage.setItem("todo",JSON.stringify(todoList))}),checkDoneMsg()}function makeImportantMsg(e){e.target.parentNode.classList.toggle("importantMsg");let t=e.target.getAttribute("id").split("_")[2];todoList.forEach((e,l)=>{l==t&&(e.important=!e.important),localStorage.setItem("todo",JSON.stringify(todoList))})}function deleteMsg(e){let t=e.target.getAttribute("id").split("_")[2],l=e.target.parentNode;todoList.forEach((e,o)=>{o==t&&(todoList.splice(o,1),l.remove(),displayList(),listenersOnListItem()),localStorage.setItem("todo",JSON.stringify(todoList))}),checkDoneMsg(),checkImpMsg(),checkEmptyList(),checkDarkMode()}function checkAllFn(e){e.preventDefault(),todoList.forEach(e=>{e.checked||(e.checked=!e.checked),localStorage.setItem("todo",JSON.stringify(todoList))}),checkDoneMsg()}function importantAllFn(e){e.preventDefault(),todoList.forEach(e=>{e.important||(e.important=!e.important),localStorage.setItem("todo",JSON.stringify(todoList))}),checkImpMsg()}function deleteAllFn(e){e.preventDefault(),todoList.length=0,localStorage.setItem("todo",JSON.stringify(todoList)),checkEmptyList()}function deleteCheckedFn(e){e.preventDefault();for(let e=todoList.length-1;e>=0;e--)todoList[e].checked&&(todoList.splice(e,1),localStorage.setItem("todo",JSON.stringify(todoList)));displayList(),checkEmptyList(),checkImpMsg(),checkDarkMode(),listenersOnListItem()}bg.addEventListener("click",hideAlert),addBtn.addEventListener("click",addToList),checkAll.addEventListener("click",checkAllFn),importantAll.addEventListener("click",importantAllFn),deleteAll.addEventListener("click",deleteAllFn),deleteChecked.addEventListener("click",deleteCheckedFn);let f,darkModeBtn=document.getElementById("darkMode"),tableStyleBtn=document.getElementById("tableStyle"),listStyleBtn=document.getElementById("listStyle"),body=document.querySelector("body"),settings=document.querySelector(".header__settings"),menu=document.querySelector(".menu"),task=document.getElementsByClassName("todoList__item"),themeStyle=[];function makeDarkMode(){f.dark,f.dark=!f.dark,checkDarkMode(),localStorage.setItem("theme",JSON.stringify(themeStyle))}function makeListStyle(){f.listStyle||(f.listStyle=!f.listStyle),checkListStyle(),localStorage.setItem("theme",JSON.stringify(themeStyle))}function makeTableStyle(){f.tableStyle||(f.tableStyle=!f.tableStyle),checkTableStyle(),localStorage.setItem("theme",JSON.stringify(themeStyle))}function checkDarkMode(){f.dark?(body.classList.add("darkMode"),darkModeBtn.classList.add("active_light"),menu.classList.add("menu_dark"),menu.classList.remove("menu_light")):(body.classList.remove("darkMode"),darkModeBtn.classList.remove("active_light"),menu.classList.add("menu_light"),menu.classList.remove("menu_dark"));for(let e=0;e<task.length;e++)f.dark?(task[e].classList.add("todoList__item_dark"),task[e].classList.remove("todoList__item_light")):(task[e].classList.remove("todoList__item_dark"),task[e].classList.add("todoList__item_light"));localStorage.setItem("theme",JSON.stringify(themeStyle))}function checkListStyle(){f.listStyle&&(list.classList.add("listStyle"),list.classList.remove("tableStyle"),f.tableStyle=!1)}function checkTableStyle(){f.tableStyle&&(list.classList.add("tableStyle"),list.classList.remove("listStyle"),f.listStyle=!1)}settings.addEventListener("click",function(){menu.classList.toggle("menu_active")}),document.addEventListener("click",function(e){e.target!=menu&&e.target!=settings&&e.target.parentNode!=menu&&menu.classList.remove("menu_active")}),window.addEventListener("load",function(){localStorage.getItem("theme")&&(themeStyle=JSON.parse(localStorage.getItem("theme")))}),window.addEventListener("load",function(){themeStyle.push({dark:!1,listStyle:!0,tableStyle:!1}),themeStyle.length=1,f=themeStyle[0],checkDarkMode(),checkListStyle(),checkTableStyle(),localStorage.setItem("theme",JSON.stringify(themeStyle))}),darkModeBtn.addEventListener("click",makeDarkMode),listStyleBtn.addEventListener("click",makeListStyle),tableStyleBtn.addEventListener("click",makeTableStyle);let preloaderBox=document.querySelector(".preloader__box"),preloaderEl="\n  <div class='preloader__item'>\n    <div class='preloader__circle'></div>\n  </div>\n",preloaderElCount=18,a=preloaderElCount;for(;a--;)preloaderBox.innerHTML+=preloaderEl;let preloaderItem=document.querySelectorAll(".preloader__item");for(let e=0;e<preloaderItem.length;e++){let t=360/preloaderItem.length*e;preloaderItem[e].style.transform="translateY(-50%) rotate("+t+"deg)"}let preloaderCircle=document.querySelectorAll(".preloader__circle"),delay=0,w=.6,q=w/preloaderElCount;for(let e=0;e<preloaderCircle.length;e++)delay+=q,preloaderCircle[e].style.animationDelay=delay+"s",preloaderCircle[e].style.animationDuration=w+"s";window.addEventListener("load",()=>{setTimeout(()=>{document.querySelector(".preloader").style="opacity: 0; z-index: -1"},2e3)});